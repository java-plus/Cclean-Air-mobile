<ion-header>
  <ion-toolbar>
    <ion-icon routerLink="/indicateurs" name="arrow-back"></ion-icon>
    <ion-buttons slot="end">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title class="ion-text-center">
      Cclean'Air
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>

  <ng-container *ngIf="!affichageErreur">
    <ion-toolbar>
      <ion-title class="ion-text-center">{{donneesLocales.commune.nom}}</ion-title>
      <ion-button routerLink="/communes/historique/{{codeInsee}}" slot="end" size="small">
        <label>Historique</label>
      </ion-button>
    </ion-toolbar>


    <ion-toolbar class="ion-text-center">
      Le {{donneesLocales.date | date:'dd/MM/yyyy à HH:mm'}}
    </ion-toolbar>


    <ion-list>
      <ion-list-header>
        Polluants
      </ion-list-header>

      <ion-item-sliding>
        <ion-item *ngFor="let polluant of donneesLocales.listePolluants">
          <ion-label>{{polluant.nom}}</ion-label>
          <ion-note slot="end" color="dark">{{polluant.valeur}} {{polluant.unite}}</ion-note>
        </ion-item>
      </ion-item-sliding>

      <ion-list-header class="ion-margin-top">
        Population
      </ion-list-header>

      <ion-item-sliding>
        <ion-item>
          <ion-label>{{donneesLocales.commune.nbHabitants}} habitants</ion-label>
        </ion-item>
      </ion-item-sliding>

      <ion-list-header class="ion-margin-top">
        Conditions Météo

      </ion-list-header>

      <ion-item-sliding>
        <ion-item lines="none">
          <ion-icon name="{{icon}}" slot="start" color="medium"></ion-icon>
        </ion-item>
        <ion-item>
          <ion-label>Humidité</ion-label>
          <ion-note slot="end" color="dark">{{donneesLocales.conditionMeteo.humidite}} %</ion-note>
        </ion-item>
        <ion-item>
          <ion-label>Ensoleillemnet</ion-label>
          <ion-note slot="end" color="dark">{{donneesLocales.conditionMeteo.ensoleillement}} %</ion-note>
        </ion-item>
        <ion-item>
          <ion-label>Température</ion-label>
          <ion-note slot="end" color="dark">{{donneesLocales.conditionMeteo.temperature | number: '1.0-0'}} °C
          </ion-note>
        </ion-item>
      </ion-item-sliding>
    </ion-list>
  </ng-container>

  <ng-container *ngIf="affichageErreur">
    <ion-toolbar>
      <ion-title class="ion-text-center">Données de l'indicateur</ion-title>
    </ion-toolbar>

    <ion-toolbar>
      <ion-text color="danger" *ngIf="erreur != null">
        <p class="ion-text-center">{{erreur}}</p>
      </ion-text>
      <ion-text color="danger" *ngIf="erreur == null">
        <p class="ion-text-center">Une erreur est survenue, merci de réessayer ultérieurement</p>
      </ion-text>
      <ion-button routerLink="/indicateurs" expand="block">
        <ion-label>Retour</ion-label>
      </ion-button>
    </ion-toolbar>



  </ng-container>


</ion-content>
